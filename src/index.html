<!-- build:remove -->
<%= t.include("partials/_top.html") %>
<!-- /build -->
<!-- build:css inline -->
<link rel="stylesheet" type="text/css" href="style.css">
<!-- /build -->





<!-- Code that goes within WCM Freeform -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<script type="text/javascript">
// Twitter Intent
(function() {
  if (window.__twitterIntentHandler) return;
  var intentRegex = /twitter\.com\/intent\/(\w+)/,
      windowOptions = 'scrollbars=yes,resizable=yes,toolbar=no,location=yes',
      width = 550,
      height = 420,
      winHeight = screen.height,
      winWidth = screen.width;

  function handleIntent(e) {
    e = e || window.event;
    var target = e.target || e.srcElement,
        m, left, top;

    while (target && target.nodeName.toLowerCase() !== 'a') {
      target = target.parentNode;
    }

    if (target && target.nodeName.toLowerCase() === 'a' && target.href) {
      m = target.href.match(intentRegex);
      if (m) {
        left = Math.round((winWidth / 2) - (width / 2));
        top = 0;

        if (winHeight > height) {
          top = Math.round((winHeight / 2) - (height / 2));
        }

        window.open(target.href, 'intent', windowOptions + ',width=' + width +
                                           ',height=' + height + ',left=' + left + ',top=' + top);
        e.returnValue = false;
        e.preventDefault && e.preventDefault();
      }
    }
  }

  if (document.addEventListener) {
    document.addEventListener('click', handleIntent, false);
  } else if (document.attachEvent) {
    document.attachEvent('onclick', handleIntent);
  }
  window.__twitterIntentHandler = true;
}());
  $(window).scroll(function() {
    
  var window_top = document.body.scrollTop;
  var div_top = document.getElementById('stick-here').getBoundingClientRect().top + window_top;

  for (var i = 0; i < 19; i++) {
    var a = document.getElementById(i);
    var at = document.getElementById(i);
    if (i == 18) {
      var ed_top = a.getBoundingClientRect().top + window_top - 460;
      var ede_top = a.getBoundingClientRect().bottom + window_top - 635;
    } else {
      var ed_top = a.getBoundingClientRect().top + window_top - 460;
      var ede_top = a.getBoundingClientRect().bottom + window_top - 460;
    }

    if (window_top > ed_top && window_top < ede_top) {
      at.classList.add('active');
      a.classList.add('active');
    } else {
      at.classList.remove('active');
      a.classList.remove('active');
    }
  }
});
</script>


<div class="dtf-container timeline">
	<p>DRIVING THE FUTURE</p>
	<h1>Self-driving cars: The road from fantasy to fruition</h1>
  <%= t.include("partials/_social.html") %>
  <div class="date">July 14, 2017</div>
	<div class="subhead timeline">Cars that can drive themselves have been a science-fiction staple since the 1930s. Many engineers over the years have labored to make that dream real. But only in the last decade has autonomous vehicle research taken on momentum, with much of the action happening in the Bay Area.</div>
</div>


<div class="timeline" id="timeline">
  <div id="stick-here"></div>	



<% json.copy_of_dtf_roadmap.timeline.forEach(function(event, idx){ %>

  <div class="block-group" id="<%= idx %>">
    <div class="block-name">
      <div class="sticky-name">
        <div class="block-yr"><%=event.Year%></div>
        <div class="sign"><img src="http://projects.sfchronicle.com/2017/driving-the-future/landing/images/sign.png"></div>
      </div>

    </div>
    
    <div class="block-content">
    	<div class="block-yr-mobile"><%=event.Year%></div>
    	<% if (event.Image){ %>
      <div class="block-img <% if (event.Vertical) { %>vertical<%}%>">
      	<img src="<%=event.Image%>"></img>
        <div class="caption"><span class="byline"><%=event.Source%></span></div>
      </div>
      <% } else if (event.Video){ %>
      	<div class='embed-container'><iframe src='<%= event.Video %>' frameborder='0' allowfullscreen></iframe></div>
        <div class="caption"><span class="byline"><%=event.Source%></span></div>

     	<%}%>
      <div class="block-text"><%=event.Text%></div>
      <hr>
    </div>
  </div>
<% }); %>

<div class="block-content">
  <div id="credits">
    <div class="credits-title">Credits</div>
      <div>Research by<a href="mailto:dbaker@sfchronicle.com"> David R. Baker<br><a href="https://twitter.com/DavidBakerSF" target="_blank">@DavidBakerSF</a><br><br></div>
      Developed by <a href="mailto:lvilla@sfchronicle.com">Lucio Villa</a><br><a href="https://twitter.com/luciovilla" target="_blank">@luciovilla</a><br>
    </div>








<!-- build:remove -->
<%= t.include("partials/_bottom.html") %>
<!-- /build -->

